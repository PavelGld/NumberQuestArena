# Arithmetic Relay - Mobile App

React Native (Expo) версия игры "Арифметическая эстафета" для мобильных устройств.

## Особенности

- **Полная функциональность веб-версии** - все режимы игры доступны на мобильных устройствах
- **Жесты перетаскивания** - выбор ячеек свайпом по горизонтали или вертикали
- **Общая база данных** - синхронизация лидербордов и кастомных досок с веб-версией
- **Двуязычный интерфейс** - русский и английский языки
- **Темная тема** - современный дизайн, оптимизированный для мобильных экранов

## Структура проекта

```
mobile/
├── App.tsx                    # Точка входа приложения
├── app.json                   # Конфигурация Expo
├── package.json               # Зависимости
├── src/
│   ├── components/            # UI компоненты
│   │   ├── GameBoard.tsx      # Игровое поле с жестами
│   │   ├── TargetList.tsx     # Список целевых чисел
│   │   ├── GameStats.tsx      # Статистика игры
│   │   └── ExpressionDisplay.tsx  # Отображение выражения
│   ├── screens/               # Экраны приложения
│   │   ├── HomeScreen.tsx     # Главное меню
│   │   ├── GameScreen.tsx     # Игровой экран
│   │   ├── LeaderboardScreen.tsx  # Таблица лидеров
│   │   ├── CustomBoardsScreen.tsx # Галерея кастомных досок
│   │   └── ConstructorScreen.tsx  # Конструктор досок
│   ├── navigation/            # Навигация
│   │   └── AppNavigator.tsx   # Стек навигации
│   ├── context/               # React Context
│   │   └── LanguageContext.tsx
│   ├── hooks/                 # Custom хуки
│   │   └── useLanguage.ts
│   └── lib/                   # Утилиты
│       ├── api.ts             # API клиент
│       ├── gameLogic.ts       # Игровая логика
│       └── i18n.ts            # Переводы
└── assets/                    # Ресурсы (иконки, сплэш)
```

## Установка и запуск

### Требования
- Node.js 18+
- Expo CLI (`npm install -g expo-cli`)
- Expo Go на мобильном устройстве (для тестирования)

### Установка зависимостей

```bash
cd mobile
npm install
```

### Запуск в режиме разработки

```bash
npm start
```

Затем отсканируйте QR-код в приложении Expo Go на вашем телефоне.

### Сборка для Android

```bash
npx expo build:android
# или с EAS Build:
npx eas build --platform android
```

### Сборка для iOS

```bash
npx expo build:ios
# или с EAS Build:
npx eas build --platform ios
```

## Конфигурация API

По умолчанию приложение подключается к API по адресу, указанному в `app.json`:

```json
{
  "expo": {
    "extra": {
      "apiUrl": "https://arithmetic-relay.replit.app"
    }
  }
}
```

Для разработки можно переопределить через переменную окружения:

```bash
EXPO_PUBLIC_API_URL=http://localhost:5000 npm start
```

## Экраны приложения

### Главный экран (HomeScreen)
- Кнопки для перехода к игре, кастомным доскам, конструктору и лидерборду
- Переключатель языка (RU/EN)

### Игровой экран (GameScreen)
- Интерактивное игровое поле с жестами
- Настройки сложности и размера поля
- Таймер, статистика, прогресс
- Модальное окно победы с сохранением результата

### Лидерборд (LeaderboardScreen)
- Фильтрация по сложности и размеру поля
- Топ игроков с временем и попытками

### Кастомные доски (CustomBoardsScreen)
- Популярные и все доски
- Фильтрация по сложности и размеру
- Переход к игре на выбранной доске

### Конструктор (ConstructorScreen)
- Создание собственных досок
- Редактирование ячеек
- Добавление целевых чисел
- Валидация через решение головоломки
- Сохранение на сервер

## Технологии

- **React Native** - кроссплатформенная мобильная разработка
- **Expo** - инструменты разработки и сборки
- **React Navigation** - навигация между экранами
- **TypeScript** - типизация
- **AsyncStorage** - локальное хранение настроек

## Связь с веб-версией

Мобильное приложение использует те же API endpoints, что и веб-версия:
- `GET/POST /api/leaderboard` - таблица лидеров
- `GET/POST /api/custom-boards` - кастомные доски
- `GET /api/custom-boards/top` - топ-100 популярных досок
- `GET/POST /api/custom-boards/:id/leaderboard` - лидерборд доски

Вся игровая логика (генерация доски, вычисление выражений, поиск решений) одинакова в обеих версиях.
